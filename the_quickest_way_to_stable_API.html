<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>The quickest way to stable API</title>

		<meta name="description" content="The quickest way to stable API using Laravel framework">
		<meta name="author" content="Milan Popovic">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">
        <link rel="stylesheet" href="css/presentation/the_quickest_way_to_stable_API.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>The quickest way to stable API</h1>
					<h3>Using Laravel framework</h3>
					<p>
                        <small>Presented by <a href="http://milanpopovic.me">Milan PopoviÄ‡</a> / <a href="http://twitter.com/komita1981">@komita1981</a></small>
					</p>
				</section>

                <section>
                    <h2>Me</h2>
                    <p class="left_align">
                        PHP developer
                    </p>
                    <p class="left_align">
                        Work for Navus Consulting Gmbh
                    </p>
                    <p class="left_align">
                        I like to learn and share knowledge
                    </p>
                    <p class="left_align"   >
                        Active member of PHP Srbija
                    </p>
                </section>

                <section>
                    <p class="left_align">
                        Why Laravel?
                    </p>
                    <p class="left_align fragment">
                        Enables rapid development
                    </p>
                    <p class="left_align fragment">
                        Stable and well tested
                    </p>
                    <p class="left_align fragment">
                        Community support
                    </p>
                    <p class="left_align fragment">
                        Documentation
                    </p>
                    <p class="left_align fragment">
                        Learning resources
                    </p>
                    <p class="left_align fragment">
                        Easy to recruit developers
                    </p>
                    <p class="left_align fragment">
                        LTS
                    </p>

                    <aside class="notes">
                        Why framework? A software framework is 80% of your application already written for you.
                    </aside>
                </section>

                <section>
                    <p class="left_align">
                        Why Laravel for quick API development?
                    </p>
                    <p class="left_align">
                        DB Migration
                    </p>
                    <p class="left_align">
                        DB seeding
                    </p>
                    <p class="left_align">
                        Model factory
                    </p>
                    <p class="left_align">
                        Form request
                    </p>
                    <p class="left_align">
                        Testing
                    </p>
                    <p class="left_align">
                        3rd Party Packages
                    </p>
                </section>

                <section>
                    <h2>
                        DB Migration
                    </h2>

                    <p class="left_align">
                        Version control for you DB schema
                    </p>

                    <p class="left_align">
                        Laravel Schema facade provides database agnostic support for creating and manipulating tables
                    </p>

                    <pre>
                        <code data-trim contenteditable>
// Create new migration
php artisan make:migration create_users_table

// Run migration
php artisan migrate

// Rollback migration
php artisan migrate
                        </code>
                    </pre>
                </section>

                <section>
                    <h2>
                        DB Seed
                    </h2>

                    <p class="left_align">
                        Sample/Test data for your DB
                    </p>

                    <pre>
                        <code data-trim contenteditable>
// Create new seeder
php artisan make:seeder UsersTableSeeder

// Run seeders
php artisan db:seed

// Run seeders v2
php artisan migrate --seed

// Run single seeder
php artisan db:seed --class=UsersTableSeeder
                        </code>
                    </pre>
                </section>

                <section>
                    <section>
                        <h2>
                            Model Factory
                        </h2>

                        <p class="left_align">
                            Default model attributes
                        </p>

                        <p class="left_align">
                            Uses Faker for generating values
                        </p>

                        <pre>
                            <code data-trim contenteditable>
$factory->define(App\User::class, function (Faker\Generator $faker) {
    return [
        'name' => $faker->name,
        'email' => $faker->email,
        'password' => bcrypt(str_random(10)),
        'remember_token' => str_random(10),
    ];
});
                            </code>
                        </pre>
                    </section>

                    <section>
                        <p class="left_align">
                            Multiple Factory Types - multiple factories for the same Eloquent model class
                        </p>
                        <pre>
                            <code data-trim contenteditable>
$factory->defineAs(App\User::class, 'admin', function ($faker) use ($factory) {
    $user = $factory->raw(App\User::class);

    return array_merge($user, ['admin' => true]);
});
                            </code>
                        </pre>
                    </section>

                    <section>
                        <p class="left_align">
                            Attach relationships
                        </p>
                        <pre>
                            <code data-trim contenteditable>
$factory->define(App\Post::class, function ($faker) {
    return [
        'title' => $faker->title,
        'content' => $faker->paragraph,
        'user_id' => function () {
            return factory(App\User::class)->create()->id;
        },
        'user_type' => function (array $post) {
            return App\User::find($post['user_id'])->type;
        }
    ];
});
                            </code>
                        </pre>
                    </section>

                    <section>
                        <p class="left_align">
                            Using factories
                        </p>
                        <pre>
                            <code data-trim contenteditable>
// Create three App\User instances...
$users = factory(App\User::class, 3)->make();

// Create three App\User "admin" instances...
$users = factory(App\User::class, 'admin', 3)->make();

// Create App\User user with given name...
$user = factory(App\User::class)->make([
    'name' => 'Abigail',
]);

// Persisting Factory Models
$user = factory(App\User::class)->create();
                            </code>
                        </pre>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>
                            Form Requests
                        </h2>

                        <p class="left_align">
                            Special class for validating request params and authorizing
                        </p>

                        <p class="left_align">
                            Each class has rules() (returns array) and authorize() (returns boolean) methods
                        </p>

                        <p class="left_align">
                            Type Hinting in Controller methods
                        </p>
                    </section>

                    <section>
                        <pre>
                            <code data-trim contenteditable>
public function rules()
{
    return [
        'title' => 'required|unique:posts|max:255',
        'body' => 'required',
    ];
}

public function authorize()
{
    $commentId = $this->route('comment');

    return Comment::where('id', $commentId)
    ->where('user_id', Auth::id())->exists();
}
                            </code>
                        </pre>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>
                            Testing
                        </h2>

                        <p class="left_align">
                            PHPUnit is included out of the box
                        </p>

                        <p class="left_align">
                            Laravel is built with testing in mind
                        </p>

                        <p class="left_align">
                            It's also ships with convenient helper methods
                        </p>

                        <p class="left_align">
                            Uses Mockery as mock object framework
                        </p>
                    </section>

                    <section>
                        <h2>
                            Working with database
                        </h2>

                        <p class="left_align">
                            Using Migrations - DatabaseMigrations trait
                        </p>

                        <p class="left_align">
                            DatabaseTransactions - DatabaseTransactions trait
                        </p>

                        <p class="left_align">
                            Model Factories
                        </p>
                    </section>

                    <section>
                        <h2>
                            Working with database
                        </h2>

                        <p class="left_align">
                            SeeInDatabase helper <br/>
                            seeInDatabase($table, array $data, $connection = null)
                        </p>

                        <p class="left_align">
                            NotSeeInDatabase helper <br/>
                            notSeeInDatabase($table, array $data, $connection = null)
                        </p>

                        <p class="left_align">
                            Seed (seed($class = 'DatabaseSeeder')
                        </p>
                    </section>

                    <section>
                        <h2>
                            Creating HTTP request
                        </h2>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
// Main method
public function call($method, $uri, $parameters = [], $cookies = [], $files = [], $server = [], $content = null)

// There are also methods for other http verbs
public function post($uri, array $data = [], array $headers = [])

// Visit the given URI with a JSON request.
public function json($method, $uri, array $data = [], array $headers = [])
{
    // removed code from original method
    $content = json_encode($data);

    $headers = array_merge([
    'CONTENT_LENGTH' => mb_strlen($content, '8bit'),
    'CONTENT_TYPE' => 'application/json',
    'Accept' => 'application/json',
    ], $headers);
}

// Call a named route and return the Response.
public function route($method, $name, $routeParameters = [], $parameters = [], $cookies = [], $files = [], $server = [], $content = null)
                                </code>
                            </pre>

                        </p>
                    </section>

                    <section>
                        <h2>
                            PHPUnit Assertions for status code and headers
                        </h2>

                        <p class="left_align fragment">
                            assertResponseOk()
                        </p>

                        <p class="left_align fragment">
                            assertResponseStatus($code)
                        </p>

                        <p class="left_align fragment">
                            seeStatusCode($status)
                        </p>

                        <p class="left_align fragment">
                            seeHeader($headerName, $value)
                        </p>
                    </section>

                    <section>
                        <h2>
                            PHPUnit Assertions for json
                        </h2>

                        <p class="left_align fragment">
                            seeJsonEquals($data)
                        </p>

                        <p class="left_align fragment">
                            seeJsonStructure($structure, $responseData)
                        </p>

                        <p class="left_align fragment">
                            seeJsonContains($data, $negate)
                        </p>

                        <p class="left_align fragment">
                            seeJsonSubset($data)
                        </p>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>
                            Packages & Tools
                        </h2>

                        <p class="left_align">
                            Dingo API
                        </p>

                        <p class="left_align">
                            Dredd
                        </p>

                        <p class="left_align">
                            Repositories
                        </p>

                        <p class="left_align">
                            CORS
                        </p>
                    </section>
                </section>

                <section>
                    <section>
                        <h2>
                            Dingo API
                        </h2>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
"require": {
    "dingo/api": "1.0.*@dev"
}
                                </code>
                            </pre>
                        </p>

                        <p class="left_align">
                            Provides set of tools to easily and quickly build your own API
                        </p>

                        <p class="left_align">
                            Requires Laravel 5.1+ or Lumen 5.1+ and PHP 5.5.9+
                        </p>
                    </section>

                    <section>
                        <h3>
                            Configuration
                        </h3>

                        <p class="left_align">
                            Much of the package comes preconfigured
                        </p>

                        <p class="left_align">
                            Use your .env file to configure most of the package
                        </p>

                        <p class="left_align">
                            Finer tuning of the package will require publishing the configuration file
                        </p>
                    </section>

                    <section>
                        <p class="left_align">
                            Configure:
                        </p>

                        <p class="left_align">
                            Name
                        </p>

                        <p class="left_align">
                            Default Version
                        </p>

                        <p class="left_align">
                            Authentication Provider
                        </p>

                        <p class="left_align">
                            Throttling / Rate Limiting (Disabled by default)
                        </p>

                        <p class="left_align">
                            Response Transformer (Fractal is the default)
                        </p>

                        <p class="left_align">
                            Response Format (JSON and a JSON response format is registered by default)
                        </p>

                        <p class="left_align">
                            Error Format
                        </p>

                    </section>

                    <section>
                        <h3>
                            Creating API Endpoints
                        </h3>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
// To avoid complications with your main application routes this package utilizes its own router.
$api = app('Dingo\Api\Routing\Router');

$api->version(
    'v1',
    function ($api) {
        $api->post('register', 'SampleApi\Http\Controllers\RegisterController@process');
        $api->post('login', 'SampleApi\Http\Controllers\LoginController@login');

        $api->get('blocks', 'SampleApi\Http\Controllers\BlocksController@getAll');
        $api->get('blocks/{id}', 'SampleApi\Http\Controllers\BlocksController@get');
        $api->post('blocks', 'SampleApi\Http\Controllers\BlocksController@create');
        $api->put('blocks/{id}', 'SampleApi\Http\Controllers\BlocksController@update');
        $api->delete('blocks/{id}', 'SampleApi\Http\Controllers\BlocksController@delete');
    }
);

//protected with JWT
$api->version(
    'v1',
    ['middleware' => 'api.auth'],
    function ($api) {
    $api->post('logout', 'Ematerials\Api\Http\Controllers\LoginController@logout');
}
);
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Responses
                        </h3>

                        <p class="left_align">
                            There's a number of different ways to return responses
                        </p>

                        <p class="left_align">
                            Use Response Builder
                        </p>

                        <p class="left_align">
                            Provides a fluent interface to easily build a more customizable response
                        </p>

                        <p class="left_align">
                            Generally used in conjunction with transformers.
                        </p>

                        <p class="left_align">
                            Use the Dingo\Api\Routing\Helpers trait
                        </p>

                    </section>

                    <section>
                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
use Dingo\Api\Routing\Helpers;
use Illuminate\Routing\Controller;

class ApiController extends Controller
{
    use Helpers;
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Responding With An Array
                        </h3>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
public function show($id)
{
    $block = $this->block->find($id);

    return $this->response->array($block->toArray());
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Responding With A Single Item
                        </h3>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
public function show($id)
{
                                    $block = $this->block->find($id);

    return $this->response->item($block, new BlockTransformer);
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Responding With A Collection Of Items
                        </h3>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
public function show($id)
{
    $blocks = $this->block->find($id);

    return $this->response->collection($blocks, new BlockTransformer);
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Responding With Paginated Items
                        </h3>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
public function show($id)
{
    $blocks = $this->block->find($id);

    return $this->response->pagination($blocks, new BlockTransformer);
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Other responses
                        </h3>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
// Responding With No Content
return $this->response->noContent();

// Responding With Created Response
return $this->response->created();

// A generic error with custom message and status code.
return $this->response->error('This is an error.', 404);

// A not found error with an optional message as the first parameter.
return $this->response->errorNotFound();

// There are also errorBadRequest, errorForbidden, errorInternal, errorUnauthorized
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <p class="left_align">
                            Adding Additional Headers
                            <pre>
                                <code data-trim contenteditable>
return $this->response->item($user, new UserTransformer)->withHeader('X-Foo', 'Bar');
                                </code>
                            </pre>
                        </p>
                        <p class="left_align">
                            Adding Meta Data
                            <pre>
                                <code data-trim contenteditable>
return $this->response->item($user, new UserTransformer)->addMeta('foo', 'bar');

//  set an array of meta data instead of chaining multiple method calls
return $this->response->item($user, new UserTransformer)->setMeta($meta)
                                </code>
                            </pre>
                        </p>
                        <p class="left_align">
                            Setting Response Status Code
                            <pre>
                                <code data-trim contenteditable>
return $this->response->item($user, new UserTransformer)->setStatusCode(200);
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Transformers
                        </h3>

                        <p class="left_align">
                            Easily and consistently transform objects into an array
                        </p>

                        <p class="left_align">
                            Type-cast integers and booleans, include pagination results, and nest relationships
                        </p>

                        <p class="left_align">
                            Fractal is the default transformation layer used by Dingo
                        </p>
                    </section>

                    <section>
                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
public function __construct()
{
    $this->availableIncludes = [
        'presentations',
        'block_settings',
    ];
                                    
    $this->defaultIncludes = [
        'block_settings',
    ];
}

public function transform(Block $block)
{
    return [
        'id' => (int)$block->id,
        'name' => $block->name,
        'start_at' => $block->start_at->toDateTimeString(),
        'ends_at' => $block->ends_at->toDateTimeString(),
        'code' => $block->code,
    ];
}

public function includePresentations(BlockModel $block)
{
    return $this->collection($block->presentations, new PresentationTransformer());
}

public function includeBlockSettings(BlockModel $block)
{
    return $this->item($block->blockSettings, new BlockSettingsTransformer());
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <p>
                            <img class="noframes" alt="Exceptions" src="img/the_quickest_way_to_stable_API/exceptions.png">
                        </p>
                    </section>

                    <section>
                        <h3>
                            Form Request end Error Responses
                        </h3>

                        <p class="left_align">
                            Extend the base API form request class
                        </p>

                        <p class="left_align">
                            Implement your own class
                        </p>

                        <p class="left_align">
                            Dingo\Api\Exception\ValidationHttpException should be thrown
                        </p>
                    </section>

                    <section>
                        <h3>
                            Authentication
                        </h3>

                        <p class="left_align">
                            HTTP Basic (Dingo\Api\Auth\Provider\Basic)
                        </p>

                        <p class="left_align">
                            JSON Web Tokens (Dingo\Api\Auth\Provider\JWT)
                        </p>

                        <p class="left_align">
                            OAuth 2.0 (Dingo\Api\Auth\Provider\OAuth2)
                        </p>

                        <p class="left_align">
                            Custom Authentication Providers
                        </p>
                    </section>

                    <section>
                        <h3>
                            Documentation
                        </h3>

                        <p class="left_align">
                            API Blueprint Documentation
                        </p>

                        <p class="left_align">
                            Annotate API controllers
                        </p>

                        <p class="left_align">
                            Generate documentation using the Artisan command
                        </p>

                        <p class="left_align">
                            But...
                        </p>
                    </section>
                </section>

                <section>
                    <section>
                        <h3>
                            Dredd â€” HTTP API Testing Framework
                        </h3>

                        <p>
                            <img class="noframes" alt="Exceptions" src="img/the_quickest_way_to_stable_API/dredd.png">
                        </p>
                    </section>

                    <section>
                        <p class="left_align">
                            &ldquo;
                            <q>
                                Dredd is a language-agnostic command-line tool for validating API documentation written
                                in API Blueprint format against its backend implementation.                            </q>
                            &rdquo;
                        </p>

                        <p class="left_align">
                            Dredd reads your API description
                        </p>

                        <p class="left_align">
                            Validates whether API replies with expected responses
                        </p>

                        <p class="left_align">
                            Continuous Integration Support
                        </p>

                        <p class="left_align">
                            Hooks â€” a glue code for each test setup and teardown
                        </p>

                        <p class="left_align">
                            Use of Gavel.js library
                        </p>

                        <p class="left_align">
                            Do not install dredd manually on Homestead - use after.sh
                        </p>

                        <aside class="notes">
                            Generates expectations on HTTP responses based on examples in the blueprint with use of Gavel.js library
                        </aside>
                    </section>

                    <section>
                        <h3>
                            Headers Expectations
                        </h3>
                        <ul>
                            <li>
                                All headers given in example must be present in the response
                            </li>
                            <li>
                                Only values of headers significant for content negotiation are validated
                            </li>
                            <li>
                                All other headers values can differ
                            </li>
                        </ul>
                    </section>

                    <section>
                        <h3>
                            Body Expectations
                        </h3>
                        <ul>
                            <li>
                                All JSON keys on any level given in the example must be present in the response JSON
                            </li>
                            <li>
                                Response JSON values must be of the same JSON primitive type
                            </li>
                            <li>
                                All JSON values can differ
                            </li>
                            <li>
                                Arrays can have additional items, type or structure is not validated.
                            </li>
                            <li>
                                Plain text must match perfectly
                            </li>
                        </ul>
                    </section>

                    <section>
                        <p class="left_align">
                            PHP Dredd hook handler
                        </p>
                        <p class="left_align">
                            Provides a bridge between the Dredd API Testing Framework and PHP environment
                        </p>
                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
"require-dev": {
    "ddelnano/dredd-hooks-php": "~1.0.0",
}
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                           Hooks usage
                        </h3>
                        <p class="left_align">
                            Loading db fixtures
                        </p>
                        <p class="left_align">
                            Cleanup after test step or steps
                        </p>
                        <p class="left_align">
                            Handling authentication and sessions
                        </p>
                        <p class="left_align">
                            Passing data between transactions (saving state from responses to stash)
                        </p>
                        <p class="left_align">
                            Modifying request generated from blueprint
                        </p>
                        <p class="left_align">
                            Changing generated expectations
                        </p>
                        <p class="left_align">
                            Setting custom expectations
                        </p>
                        <p class="left_align">
                            Debugging via logging stuff
                        </p>

                    </section>
                    <section>
                        <h3>
                            Hooks type
                        </h3>

                        <ul>
                            <li>
                                beforeEach
                            </li>
                            <li>
                                afterEach
                            </li>
                            <li>
                                beforeAll
                            </li>
                            <li>
                                afterAll
                            </li>
                            <li>
                                before
                            </li>
                            <li>
                                after
                            </li>
                            </li>
                            <li>
                                beforeEachValidationHooks
                            </li>
                            <li>
                                afterEachValidationHooks
                            </li>
                        </ul>
                    </section>

                    <section>
                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
require __DIR__ . '/../../../vendor/autoload.php';

$app = require __DIR__ . '/../../../bootstrap/app.php';

$app->make(\Illuminate\Contracts\Console\Kernel::class)->bootstrap();

Artisan::call('migrate');

$user = factory(\Ematerials\Api\Models\User::class)->create([
    'email' => 'knownuser@example.dev'
]);

Hooks::beforeEach(function (&$transaction) use ($app) {
    $app->make('db')->beginTransaction();
});

Hooks::afterEach(function (&$transaction) use ($app) {
    $app->make('db')->rollback();
});

Hooks::afterAll(function (&$transaction) use ($app) {
    Artisan::call('migrate:rollback');
});

Hooks::before('Authentication > Logout', function (&$transaction) {
    $transaction->skip = true;
});

Hooks::after('Block > Show', function (&$transaction) {
    // Some actions to do
});
                                </code>
                            </pre>
                        </p>
                    </section>

                    <section>
                        <h3>
                            Run dredd
                        </h3>
                        <pre>
                            <code data-trim contenteditable>
dredd documentation.apib
    http://localhost:8001
    --server "php -S 0.0.0.0:8001 -t public/"
    --language vendor/bin/dredd-hooks-php
    --hookfiles tests/dredd/hooks/hookfile.php
                            </code>
                        </pre>
                    </section>

                </section>

                <section>
                    <section>
                        <h2>
                            Repositories
                        </h2>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
"require": {
    "bosnadev/repositories": "0.*"
}
                                </code>
                            </pre>
                        </p>

                        <p class="left_align">
                            Container where data access logic is stored
                        </p>

                        <p class="left_align">
                            Hides the details of data access logic from business logic
                        </p>

                        <aside class="notes">
                            We allow business logic to access the data object without having knowledge of underlying data access architecture.
                        </aside>

                    </section>

                    <section>
                        <pre>
                            <code data-trim contenteditable>
interface RepositoryInterface
{
    public function all($columns = array('*'));

    public function paginate($perPage = 15, $columns = array('*'));

    public function create(array $data);

    public function update(array $data, $id);

    public function delete($id);

    public function find($id, $columns = array('*'));

    public function findBy($field, $value, $columns = array('*'));
}
                            </code>
                        </pre>
                    </section>

                    <section>
                        <pre>
                            <code data-trim contenteditable>
use App\Repositories\FilmRepository as Film;

class FilmsController extends Controller
{
    /**
    * @var Film
    */
    private $film;

    public function __construct(Film $film)
    {
        $this->film = $film;
    }

    public function index()
    {
        return \Response::json($this->film->all());
    }
}
                            </code>
                        </pre>
                    </section>


                    <section>
                        <p class="left_align">
                            Basic actions are just enough for simple querying
                        </p>
                        <p class="left_align">
                            Added CriteriaInterface
                        </p>

                        <pre>
                            <code data-trim contenteditable>
interface CriteriaInterface
{
    public function skipCriteria($status = true);

    public function getCriteria();

    public function getByCriteria(Criteria $criteria);

    public function pushCriteria(Criteria $criteria);

    public function applyCriteria();
}
                            </code>
                        </pre>
                    </section>

                    <section>
                        <pre>
                            <code data-trim contenteditable>
class LengthOverTwoHours implements CriteriaInterface
{
    public function apply($model, Repository $repository)
    {
        $query = $model->where('length', '>', 120);
        return $query;
    }
}
                            </code>
                        </pre>
                    </section>

                    <section>
                        <pre>
                            <code data-trim contenteditable>
use App\Repositories\Criteria\Films\LengthOverTwoHours;
use App\Repositories\FilmRepository as Film;

class FilmsController extends Controller
{
    /**
    * @var Film
    */
    private $film;

    public function __construct(Film $film)
    {
        $this->film = $film;
    }

    public function index()
    {
        $this->film->pushCriteria(new LengthOverTwoHours());
        return \Response::json($this->film->all());
    }
}
                            </code>
                        </pre>
                    </section>
                </section>

                    <section>
                        <h2>
                            CORS (Cross-Origin Resource Sharing)
                        </h2>

                        <p class="left_align">
                            <pre>
                                <code data-trim contenteditable>
"require": {
    "barryvdh/laravel-cors": "^0.7.2"
}
                                </code>
                            </pre>
                        </p>

                        <p class="left_align">
                            Allows you to send CORS headers with ACL-style per-url configuration.
                        </p>

                        <p class="left_align">
                            Supports Laravel & Lumen
                        </p>

                    </section>
                </section>

                <section style="text-align: left;">
                    <h2>
                        Resources
                    </h2>
                    <p>
                        - <a href="laravel.com">Laravel documentation</a> <br>
                        - <a href="www.slideshare.net/jdblackmore1/digpen-sw-why-choose-laravel">Why choose Laravel </a> <br>
                        - <a href="https://bosnadev.com/2015/03/07/using-repository-pattern-in-laravel-5/">Using Repository </a> <br>
                    </p>
                </section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
